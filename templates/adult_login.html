<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <form method=get name=jumin_form onSubmit="return jumin_QC()">
        애들은 가!<br>
        이름:<input name="username" onChange="return userName_QC(this.form)" maxlength="20" size="12">
        생년월일 :<input maxlength=8 name=jumin1 onFocus="this.value = this.value;" onKeyUp=auto_Move(this); size=8>
        주민등록뒷번호 :<input maxlength=7 name=jumin2 onKeyUp=prev_move(this); size=8>           
        <input type="submit" value="성인인증">
        </FORM>
        

    <br><hr><br>
<div id="demo"></div>
<SCRIPT language=JavaScript>

    function userName_QC(form){
      var no_name="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_-`~!@#$%^&*()=\+|{}[]:;'<>,.?/";
      var string=form.username.value;
      var len=string.length;
     for(i=0;i<len;i++){
      if(no_name.indexOf(string.substring(i,i+1))>0){
      alert("올바른 이름이 아닙니다.")
                  form.username.value="";
            form.username.blur();
            form.username.focus();
              return false;
      }
        if(len<2 || len>6){
      alert("이름이 잘못되었습니다.");
      form.username.value="";
          form.username.blur();
          form.username.focus();
              return false;
      }
      }
     } 
    
    
    function jumin_QC()
    {
        var chk =0;
        var yy = document.jumin_form.jumin1.value.substring(0,4);
        var mm = document.jumin_form.jumin1.value.substring(4,6);
        var dd = document.jumin_form.jumin1.value.substring(6,8);
        var sex = document.jumin_form.jumin2.value.substring(0,1);
    
        var gijun_date = 20030101;// 옆의 숫자는 81년1월1일 이후에 태어난 사람은 성인이 아닌것으로 판단
        if (document.jumin_form.jumin2.value.split(" ").join("") == "") {
            alert ('주민등록번호를 입력하여 주십시오');
            document.jumin_form.jumin1.focus();
            return false;
        }
    
        if (document.jumin_form.jumin1.value.length!=8) {
                alert ('생년월일 8자리를 입력하십시오');
                document.jumin_form.jumin1.focus();
                return false;
        }
     if (document.jumin_form.jumin2.value.length != 7 )
     {
                alert ('주민등록번호 뒤 7자리를 입력하십시오.');
                document.jumin_form.jumin2.focus();
                return false;
        }
      if (isNaN(document.jumin_form.jumin1.value) || isNaN(document.jumin_form.jumin2.value))
     {
      document.jumin_form.jumin1.value = ""
      document.jumin_form.jumin2.value = ""
      alert('주민등록번호는 숫자만 가능합니다.');
      return false;
     }
        if ((document.jumin_form.jumin1.value.length!=8)||(mm <1||mm>12||dd<1)){
                document.jumin_form.jumin1.value = ""
                alert ('생년월일 8자리가 잘못되었습니다.');
                document.jumin_form.jumin1.focus();
                return false;
        }
        if ((sex != 1 && sex !=2 && sex !=3 && sex !=4)||(document.jumin_form.jumin2.value.length != 7 )){
                document.jumin_form.jumin2.value = ""
                alert ('주민등록번호 뒤 7 자리가 잘못되었습니다.');
                document.jumin_form.jumin2.focus();
                return false;    
        }
    
        // for (var i = 0; i <=5 ; i++){
        //     chk = chk + ((i%8+2) * parseInt(document.jumin_form.jumin1.value.substring(i,i+1)))
    
        // }
        // for (var i = 6; i <=11 ; i++){
        //         chk = chk + ((i%8+2) * parseInt(document.jumin_form.jumin2.value.substring(i-6,i-5)))
        // }
        // chk = 11 - (chk %11)
        // chk = chk % 10
        // if (chk != document.jumin_form.jumin2.value.substring(6,7))
        // {
        //         document.jumin_form.jumin1.value = ""
        //         document.jumin_form.jumin2.value = ""
        //         alert ('잘못된 주민등록번호입니다.');
        //         document.jumin_form.jumin1.focus();
        //         return false;
        // }
        if (document.jumin_form.jumin1.value < gijun_date)
        {
              alert ('오빠 빨리와 나 너무 더워');
              document.jumin_form.jumin1.focus();
      document.location="naver.com ";//성인일 경우 이동할 문서의 경로
    
        return false;
        }
        else
        {          alert ('애들은 가라.');
              document.jumin_form.jumin1.focus();
        return false;
        }
        return true;
    }
    //주민등록번호 자동 이동 기능
     function auto_Move(obj)
     {
      if (obj.value.length > 8)
      {
      jumin_form.jumin2.focus();
      }
     }
     
     function prev_move(obj)
     {
      if (obj.value.length == 0)
      {
    
      jumin_form.jumin1.focus();
    
      }
     }
    </SCRIPT>
    
</body>
</html>